{% extends "orphanage/base.html" %}
{% block title %}Child Details{% endblock %}

{% block content %}
<h2 class="mb-4">{{ child.name }}</h2>

<style>
    .child-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 30px;
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        border: 1px solid #dee2e6;
    }
    .child-photo {
        width: 200px;
        height: 200px;
        object-fit: cover;
        border-radius: 10px;
        border: 1px solid #ccc;
    }
    .child-info {
        flex: 1;
        min-width: 250px;
    }
    .allocation-list {
        background-color: #fff;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 15px;
    }
</style>

<div class="child-container">
    {% if child.photo %}
        <img src="{{ child.photo.url }}" alt="{{ child.name }}" class="child-photo">
    {% else %}
        <img src="{% static 'default_child.png' %}" alt="No photo available" class="child-photo">
    {% endif %}

    <div class="child-info">
        <p><strong>Age:</strong> {{ child.age }}</p>
        <p><strong>Gender:</strong> {{ child.gender }}</p>
        <p><strong>Admission Date:</strong> {{ child.admission_date|date:"d M Y" }}</p>
        <p><strong>Needs:</strong> {{ child.need|default:"No specific needs listed." }}</p>
    </div>
</div>

<h3 class="mb-3">Allocated Staff</h3>
<div class="allocation-list">
    <ul>
        {% for alloc in allocations %}
            <li>
                {{ alloc.staff.name }} â€” 
                <em>Allocated on {{ alloc.allocated_at|date:"d M Y" }}</em>
            </li>
        {% empty %}
            <li>No staff allocated yet.</li>
        {% endfor %}
    </ul>
</div>

{% endblock %}