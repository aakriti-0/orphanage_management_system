{% load static %}
<h2>Donation Allocations</h2>
<div class="table-responsive">
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Donor</th>
        <th>Child</th>
        <th>Allocated Amount</th>
        <th>Need</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% for allocation in allocations %}
      <tr>
        <td>{{ allocation.donation.donor.user.get_full_name|default:allocation.donation.donor.user.username }}</td>
        <td>{{ allocation.child.name }}</td>
        <td>{{ allocation.allocated_amount|floatformat:2 }}</td>
        <td>
          {% if allocation.donation.allocated_need %}
            {{ allocation.donation.allocated_need.title }}
          {% else %}
            N/A
          {% endif %}
        </td>
        <td>{{ allocation.date|date:"Y-m-d H:i" }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center text-muted">No allocations found.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

